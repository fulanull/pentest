/*
 ============================================================================
 Name        : SocketInC.c
 Author      : Igor Souza
 Version     :
 Copyright   : Your copyright notice
 Description : Example of socket in C
 ============================================================================
 */

#include <stdio.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <netdb.h>

#include "PortScan.h"
#include "dos.h"

/* in unix terminal type: man 6 ip
 tcp_socket = socket(AF_INET, SOCK_STREAM, 0);
 udp_socket = socket(AF_INET, SOCK_DGRAM, 0);
 raw_socket = socket(AF_INET, SOCK_RAW, protocol);
 */

void simpleTcpClientSocket();


int main(int argc, char* argsv[]) {
	puts("Started!!!"); /* prints !!!Hello World!!! */

//	simpleTcpClientSocket();

//	scanPorts("37.59.174.225", 1, 0xffff);

	dos("37.59.174.225",21);

	puts("\nFinished!!!");
	return 0;
}



void simpleTcpClientSocket()
{
	int tcp_socket;
	tcp_socket = socket(AF_INET, SOCK_STREAM, 0); //0 indicates IP

	if(tcp_socket == -1 )
	{
		fprintf(stderr,"%s:%d : ", __FILE__, __LINE__);
		fprintf(stderr, "Socket creation failed!!!\n");
		return -1;
	}

	struct sockaddr_in target;
	memset(&target, 0x00, sizeof(target));
	target.sin_family = AF_INET;
	target.sin_addr.s_addr = inet_addr("192.168.3.1");
	target.sin_port = htons(80);

	int connection;
	connection = connect(tcp_socket,(struct sockaddr *) &target, sizeof(target));
//printf("Connection %d\n", connection);
	if( connection != 0 )
	{
		fprintf(stderr,"%s:%d : ", __FILE__, __LINE__);
		fprintf(stderr, "Socket connection failed!!!\n");
		return -1;
	}

	close(tcp_socket);
}
