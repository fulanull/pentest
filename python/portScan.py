#!/usr/bin/python

import socket
import sys

filename = str(sys.argv[0])
filename = filename.split("/")[-1]

if len(sys.argv) not in (2,4) :
    print("Usage: ./%s [ip] " %(filename))
    print("Usage: ./%s [ip] [initialPort] [FinalPort]" %(filename))
    print("Example: ./%s 8.8.8.8" %(filename))
    print("Example: ./%s 8.8.8.8 0 1000" %(filename))
    exit(1)

initialPort = 0
finalPort = pow(2,16) - 1

print ("Size", len(sys.argv))
if len(sys.argv) == 4:
    initialPort = int (sys.argv[2])
    finalPort = int (sys.argv[3])

print("Scannig %s from %d to %d" %(sys.argv[1], initialPort, finalPort))

for port in range( initialPort, finalPort+1):
    mysocket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    res = mysocket.connect_ex( (sys.argv[1], port) )
    if res == 0:
        print ("Port %d open!" %(port))
        mysocket.close()

print ("Scan finished!!!")