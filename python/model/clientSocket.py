#!/usr/bin/python
import socket
import sys

filename = str(sys.argv[0])
filename = filename.split("/")[-1]


if len(sys.argv) != 3 :
    print("Usage: ./%s [ip] [port]" %(filename))
    print("Example: ./%s 8.8.8.8 80" %(filename))
    exit(1)


mysocket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
tupleSocket = ( sys.argv[1], int(sys.argv[2]))
print( type(tupleSocket))
res = mysocket.connect_ex( tupleSocket ) #returns 0 if everything is fine

if res != 0:
    print ("An error occurred");
    exit(2)
else:
    print ("Socket open")
    mysocket.send("Oi\r\n\r\n".encode())
    msg = mysocket.recv(10000).decode()
    print ("Received information: \n", msg)


print ("Closing the socket...")
mysocket.close()






